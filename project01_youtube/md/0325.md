# projectPT

# 0325

1. db.forEach

   ```
   .get((req, res) => {
       let channels = [];
       if (db.size) {
         db.forEach((channel, id) => {
           channels.push(channel);
         });
         return res.status(201).json({
           status: 200,
           channelList: channels,
         });
       }

       res.status(404).json({
         status: 404,
         msg: '채널을 찾을 수 없습니다.',
       });
     })
   ```

   이 코드는 **`db`** 맵 객체의 크기(**`db.size`**)를 확인하여 채널 데이터가 있는지 여부를 판단합니다. 만약 채널 데이터가 존재한다면 **`db.forEach()`** 메서드를 사용하여 각 채널을 **`channels`** 배열에 추가한 후, 200 상태 코드와 채널 목록을 담은 응답을 반환합니다. 그렇지 않으면 404 상태 코드와 '채널을 찾을 수 없습니다.' 메시지를 담은 응답을 반환합니다.

2. Array.from

   ```
     .get((req, res) => {
       const channels = Array.from(db.values());
       if (channels.length > 0) {
         return res.status(200).json({
           status: 200,
           channelList: channels,
         });
       }
       res.status(404).json({
         status: 404,
         msg: '채널을 찾을 수 없습니다.',
       });
     })
   ```

   이 코드는 **`Array.from()`** 메서드를 사용하여 **`db`** 맵 객체의 값들을 배열로 변환한 후, 해당 배열의 길이를 확인하여 채널 데이터가 있는지 여부를 판단합니다. 만약 채널 데이터가 존재한다면 200 상태 코드와 채널 목록을 담은 응답을 반환하고, 그렇지 않으면 404 상태 코드와 '채널을 찾을 수 없습니다.' 메시지를 담은 응답을 반환합니다.

   첫 번째 코드는 **`Array.from()`** 메서드를 사용하여 맵 객체의 값을 배열로 변환하고, 두 번째 코드는 **`db.forEach()`** 메서드를 사용하여 직접 맵 객체의 값을 반복하면서 가져옵니다.

   Q. 두 코드의 성능 차이는 있을까요? 만약 있다면 그 이유는 무엇일까요?

   **`Array.from()`** 메서드 :
   맵 객체의 값을 배열로 변환한 후, 배열의 길이를 확인합니다.
   이 과정에서 모든 값을 새로운 배열로 복사하는 작업이 수행됩니다.
   따라서 맵 객체의 크기가 클수록 이 작업에 소요되는 시간이 증가할 수 있습니다.

   **`db.forEach()`** 메서드 :

   맵 객체의 크기만 확인하고, 데이터를 배열로 변환하지 않습니다.
   대신 **`db.forEach()`** 메서드를 사용하여 직접 맵 객체의 값을 반복하면서 가져오기 때문에,
   추가적인 데이터 구조를 생성하지 않고도 값을 조회할 수 있습니다.

   Q. 어떤 상황에서 어떤 방식을 사용해야할까요?

   **데이터 양과 구조 :**

   - 데이터가 큰지 작은지에 따라 다를 수 있습니다.
     큰 데이터셋의 경우 불필요한 복사 작업을 피하기 위해 **`db.forEach()`**을 선호할 수 있습니다.
   - 데이터가 복잡한 구조를 가지고 있는 경우,
     **`Array.from()`**으로 배열로 변환하는 것이 코드의 가독성을 향상시킬 수 있습니다.

   **가독성 및 유지보수성**:

   - **`Array.from()`**은 데이터를 배열로 변환하고 조작하기 때문에 코드가 더 복잡할 수 있습니다.
     그러나 배열을 사용하는 것이 익숙한 개발자에게는 이해하기 쉬울 수 있습니다.
   - **`db.forEach()`**은 코드가 간결하고 직관적이며, 데이터 구조에 대한 직접적인 이해가 필요합니다.

   목적 :

   데이터를 배열로 변환하는 작업 자체가 중요한 경우에는 **`Array.from()`**을,

   그러나 데이터를 반복하고 처리하는 것이 주요 목적이라면 **`db.forEach()`**을 사용

느낀점 : 오늘은 db.forEach()와 Array.from() 차이에 대해서 조금 더 깊이있게 알아봤다.
작은 데이터에서는 큰 차이는 없지만 방대한 데이터와 상황에 따라 사용하는 메서드는 달라지는 점,
이런 사소한 부분을 디테일하게 알고 가면 앞으로 협업할 때 사고방식 개선에 좋을 것 같다는 생각이 들었다.
